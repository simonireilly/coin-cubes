var Gr=Object.create;var I=Object.defineProperty,Vr=Object.defineProperties,Ur=Object.getOwnPropertyDescriptor,Xr=Object.getOwnPropertyDescriptors,Yr=Object.getOwnPropertyNames,$e=Object.getOwnPropertySymbols,Qr=Object.getPrototypeOf,Ne=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable;var Ce=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))Ne.call(t,r)&&Ce(e,r,t[r]);if($e)for(var r of $e(t))Zr.call(t,r)&&Ce(e,r,t[r]);return e},z=(e,t)=>Vr(e,Xr(t)),Pe=e=>I(e,"__esModule",{value:!0});var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),en=(e,t)=>{Pe(e);for(var r in t)I(e,r,{get:t[r],enumerable:!0})},tn=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Yr(t))!Ne.call(e,s)&&s!=="default"&&I(e,s,{get:()=>t[s],enumerable:!(r=Ur(t,s))||r.enumerable});return e},De=e=>tn(Pe(I(e!=null?Gr(Qr(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Je=y((Qo,We)=>{"use strict";We.exports=Me;var{toString:rn}=Object.prototype,X=Symbol("circular-ref-tag"),Y=Symbol("pino-raw-err-ref"),Fe=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[Y]},set:function(e){this[Y]=e}}});Object.defineProperty(Fe,Y,{writable:!0,value:{}});function Me(e){if(!(e instanceof Error))return e;e[X]=void 0;let t=Object.create(Fe);t.type=rn.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack;for(let r in e)if(t[r]===void 0){let s=e[r];s instanceof Error?s.hasOwnProperty(X)||(t[r]=Me(s)):t[r]=s}return delete e[X],t.raw=e,t}});var Ve=y((Zo,Ge)=>{"use strict";Ge.exports={mapHttpRequest:nn,reqSerializer:He};var Q=Symbol("pino-raw-req-ref"),Ke=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Q]},set:function(e){this[Q]=e}}});Object.defineProperty(Ke,Q,{writable:!0,value:{}});function He(e){let t=e.info||e.socket,r=Object.create(Ke);return r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl?(r.url=e.originalUrl,r.query=e.query,r.params=e.params):r.url=e.path||(e.url?e.url.path||e.url:void 0),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function nn(e){return{req:He(e)}}});var Qe=y((el,Ye)=>{"use strict";Ye.exports={mapHttpResponse:sn,resSerializer:Xe};var Z=Symbol("pino-raw-res-ref"),Ue=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Z]},set:function(e){this[Z]=e}}});Object.defineProperty(Ue,Z,{writable:!0,value:{}});function Xe(e){let t=Object.create(Ue);return t.statusCode=e.statusCode,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function sn(e){return{res:Xe(e)}}});var te=y((tl,Ze)=>{"use strict";var ee=Je(),C=Ve(),P=Qe();Ze.exports={err:ee,mapHttpRequest:C.mapHttpRequest,mapHttpResponse:P.mapHttpResponse,req:C.reqSerializer,res:P.resSerializer,wrapErrorSerializer:function(t){return t===ee?t:function(s){return t(ee(s))}},wrapRequestSerializer:function(t){return t===C.reqSerializer?t:function(s){return t(C.reqSerializer(s))}},wrapResponseSerializer:function(t){return t===P.resSerializer?t:function(s){return t(P.resSerializer(s))}}}});var re=y((rl,et)=>{"use strict";et.exports=function(t){if(t===void 0&&(t=2),t>=Error.stackTraceLimit)throw new TypeError("getCallerFile(position) requires position be less then Error.stackTraceLimit but position was: `"+t+"` and Error.stackTraceLimit was: `"+Error.stackTraceLimit+"`");var r=Error.prepareStackTrace;Error.prepareStackTrace=function(n,i){return i};var s=new Error().stack;if(Error.prepareStackTrace=r,s!==null&&typeof s=="object")return s[t]?s[t].getFileName():void 0}});var rt=y((nl,tt)=>{"use strict";var{createContext:on,runInContext:ln}=require("vm");tt.exports=an;function an(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=s=>`fast-redact \u2013 Invalid path (${s})`}=e;return function({paths:n}){n.forEach(i=>{if(typeof i!="string")throw Error(t());try{if(/ã€‡/.test(i))throw Error();let a=new Proxy({},{get:()=>a,set:()=>{throw Error()}}),o=(i[0]==="["?"":".")+i.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();ln(`
          (function () {
            'use strict'
            o${o}
            if ([o${o}].length !== 1) throw Error()
          })()
        `,on({o:a,"\u3007":null}),{codeGeneration:{strings:!1,wasm:!1}})}catch(a){throw Error(r(i))}})}}});var D=y((sl,nt)=>{"use strict";nt.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var it=y((il,st)=>{"use strict";var cn=D();st.exports=un;function un({paths:e}){let t=[];var r=0;let s=e.reduce(function(n,i,a){var o=i.match(cn).map(l=>l.replace(/'|"|`/g,""));let f=i[0]==="[";o=o.map(l=>l[0]==="["?l.substr(1,l.length-2):l);let c=o.indexOf("*");if(c>-1){let l=o.slice(0,c),u=l.join("."),h=o.slice(c+1,o.length);if(h.indexOf("*")>-1)throw Error("fast-redact \u2013 Only one wildcard per path is supported");let d=h.length>0;r++,t.push({before:l,beforeStr:u,after:h,nested:d})}else n[i]={path:o,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(i),leadingBracket:f};return n},{});return{wildcards:t,wcLen:r,secret:s}}});var lt=y((ol,ot)=>{"use strict";var fn=D();ot.exports=hn;function hn({secret:e,serialize:t,wcLen:r,strict:s,isCensorFct:n,censorFctTakesPath:i},a){let o=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${pn(s,t)}
    }
    const { censor, secret } = this
    ${dn(e,n,i)}
    this.compileRestore()
    ${mn(r>0,n,i)}
    ${yn(t)}
  `).bind(a);return t===!1&&(o.restore=f=>a.restore(f)),o}function dn(e,t,r){return Object.keys(e).map(s=>{let{escPath:n,leadingBracket:i,path:a}=e[s],o=i?1:0,f=i?"":".",c=[];for(var l;(l=fn.exec(s))!==null;){let[,m]=l,{index:p,input:b}=l;p>o&&c.push(b.substring(0,p-(m?0:1)))}var u=c.map(m=>`o${f}${m}`).join(" && ");u.length===0?u+=`o${f}${s} != null`:u+=` && o${f}${s} != null`;let h=`
      switch (true) {
        ${c.reverse().map(m=>`
          case o${f}${m} === censor:
            secret[${n}].circle = ${JSON.stringify(m)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(a)}`:"val";return`
      if (${u}) {
        const val = o${f}${s}
        if (val === censor) {
          secret[${n}].precensored = true
        } else {
          secret[${n}].val = val
          o${f}${s} = ${t?`censor(${d})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function mn(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function yn(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function pn(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var ne=y((ll,ct)=>{"use strict";ct.exports={groupRedact:bn,groupRestore:gn,nestedRedact:Sn,nestedRestore:wn};function gn({keys:e,values:t,target:r}){if(r==null)return;let s=e.length;for(var n=0;n<s;n++){let i=e[n];r[i]=t[n]}}function bn(e,t,r,s,n){let i=at(e,t);if(i==null)return{keys:null,values:null,target:null,flat:!0};let a=Object.keys(i),o=a.length,f=t.length,c=n?[...t]:void 0,l=new Array(o);for(var u=0;u<o;u++){let h=a[u];l[u]=i[h],n?(c[f]=h,i[h]=r(i[h],c)):s?i[h]=r(i[h]):i[h]=r}return{keys:a,values:l,target:i,flat:!0}}function wn(e){let t=e.length;for(var r=0;r<t;r++){let{key:s,target:n,value:i}=e[r];n[s]=i}}function Sn(e,t,r,s,n,i,a){let o=at(t,r);if(o==null)return;let f=Object.keys(o),c=f.length;for(var l=0;l<c;l++){let u=f[l],{value:h,parent:d,exists:m}=_n(o,u,r,s,n,i,a);m===!0&&d!==null&&e.push({key:s[s.length-1],target:d,value:h})}return e}function vn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _n(e,t,r,s,n,i,a){let o=s.length,f=o-1,c=t;var l=-1,u,h,d,m=null,p=!0;if(d=u=e[t],typeof u!="object")return{value:null,parent:null,exists:p};for(;u!=null&&++l<o;){if(t=s[l],m=d,!(t in u)){p=!1;break}if(d=u[t],h=l!==f?d:i?a?n(d,[...r,c,...s]):n(d):n,u[t]=vn(u,t)&&h===d||h===void 0&&n!==void 0?u[t]:h,u=u[t],typeof u!="object")break}return{value:d,parent:m,exists:p}}function at(e,t){for(var r=-1,s=t.length,n=e;n!=null&&++r<s;)n=n[t[r]];return n}});var ft=y((al,ut)=>{"use strict";var{groupRestore:kn,nestedRestore:xn}=ne();ut.exports=On;function On({secret:e,wcLen:t}){return function(){if(this.restore)return;let s=Object.keys(e),n=En(e,s),i=t>0,a=i?{secret:e,groupRestore:kn,nestedRestore:xn}:{secret:e};this.restore=Function("o",jn(n,s,i)).bind(a)}}function En(e,t){return t.map(r=>{let{circle:s,escPath:n,leadingBracket:i}=e[r],o=s?`o.${s} = secret[${n}].val`:`o${i?"":"."}${r} = secret[${n}].val`,f=`secret[${n}].val = undefined`;return`
      if (secret[${n}].val !== undefined) {
        try { ${o} } catch (e) {}
        ${f}
      }
    `}).join("")}function jn(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var dt=y((cl,ht)=>{"use strict";ht.exports=Ln;function Ln(e){let{secret:t,censor:r,compileRestore:s,serialize:n,groupRedact:i,nestedRedact:a,wildcards:o,wcLen:f}=e,c=[{secret:t,censor:r,compileRestore:s}];return n!==!1&&c.push({serialize:n}),f>0&&c.push({groupRedact:i,nestedRedact:a,wildcards:o,wcLen:f}),Object.assign(...c)}});var pt=y((ul,yt)=>{"use strict";var mt=rt(),An=it(),Rn=lt(),qn=ft(),{groupRedact:Tn,nestedRedact:In}=ne(),zn=dt(),Bn=D(),$n=mt(),se=e=>e;se.restore=se;var Nn="[REDACTED]";ie.rx=Bn;ie.validator=mt;yt.exports=ie;function ie(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,s=e.remove;if(s===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let n=s===!0?void 0:"censor"in e?e.censor:Nn,i=typeof n=="function",a=i&&n.length>1;if(t.length===0)return r||se;$n({paths:t,serialize:r,censor:n});let{wildcards:o,wcLen:f,secret:c}=An({paths:t,censor:n}),l=qn({secret:c,wcLen:f}),u="strict"in e?e.strict:!0;return Rn({secret:c,wcLen:f,serialize:r,strict:u,isCensorFct:i,censorFctTakesPath:a},zn({secret:c,censor:n,compileRestore:l,serialize:r,groupRedact:Tn,nestedRedact:In,wildcards:o,wcLen:f}))}});var q=y((fl,gt)=>{"use strict";var Cn=Symbol("pino.setLevel"),Pn=Symbol("pino.getLevel"),Dn=Symbol("pino.levelVal"),Fn=Symbol("pino.useLevelLabels"),Mn=Symbol("pino.useOnlyCustomLevels"),Wn=Symbol("pino.mixin"),Jn=Symbol("pino.lsCache"),Kn=Symbol("pino.chindings"),Hn=Symbol("pino.parsedChindings"),Gn=Symbol("pino.asJson"),Vn=Symbol("pino.write"),Un=Symbol("pino.redactFmt"),Xn=Symbol("pino.time"),Yn=Symbol("pino.timeSliceIndex"),Qn=Symbol("pino.stream"),Zn=Symbol("pino.stringify"),es=Symbol("pino.stringifiers"),ts=Symbol("pino.end"),rs=Symbol("pino.formatOpts"),ns=Symbol("pino.messageKey"),ss=Symbol("pino.nestedKey"),is=Symbol("pino.nestedKeyStr"),os=Symbol("pino.wildcardFirst"),ls=Symbol.for("pino.serializers"),as=Symbol.for("pino.formatters"),cs=Symbol.for("pino.hooks"),us=Symbol.for("pino.metadata");gt.exports={setLevelSym:Cn,getLevelSym:Pn,levelValSym:Dn,useLevelLabelsSym:Fn,mixinSym:Wn,lsCacheSym:Jn,chindingsSym:Kn,parsedChindingsSym:Hn,asJsonSym:Gn,writeSym:Vn,serializersSym:ls,redactFmtSym:Un,timeSym:Xn,timeSliceIndexSym:Yn,streamSym:Qn,stringifySym:Zn,stringifiersSym:es,endSym:ts,formatOptsSym:rs,messageKeySym:ns,nestedKeySym:ss,wildcardFirstSym:os,needsMetadataGsym:us,useOnlyCustomLevelsSym:Mn,formattersSym:as,hooksSym:cs,nestedKeyStrSym:is}});var ae=y((hl,vt)=>{"use strict";var oe=pt(),{redactFmtSym:fs,wildcardFirstSym:F}=q(),{rx:le,validator:hs}=oe,bt=hs({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),wt="[Redacted]",St=!1;function ds(e,t){let{paths:r,censor:s}=ms(e),n=r.reduce((o,f)=>{le.lastIndex=0;let c=le.exec(f),l=le.exec(f),u=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(u==="*"&&(u=F),l===null)return o[u]=null,o;if(o[u]===null)return o;let{index:h}=l,d=`${f.substr(h,f.length-1)}`;return o[u]=o[u]||[],u!==F&&o[u].length===0&&o[u].push(...o[F]||[]),u===F&&Object.keys(o).forEach(function(m){o[m]&&o[m].push(d)}),o[u].push(d),o},{}),i={[fs]:oe({paths:r,censor:s,serialize:t,strict:St})},a=(...o)=>t(typeof s=="function"?s(...o):s);return[...Object.keys(n),...Object.getOwnPropertySymbols(n)].reduce((o,f)=>{if(n[f]===null)o[f]=c=>a(c,[f]);else{let c=typeof s=="function"?(l,u)=>s(l,[f,...u]):s;o[f]=oe({paths:n[f],censor:c,serialize:t,strict:St})}return o},i)}function ms(e){if(Array.isArray(e))return e={paths:e,censor:wt},bt(e),e;let{paths:t,censor:r=wt,remove:s}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return s===!0&&(r=void 0),bt({paths:t,censor:r}),{paths:t,censor:r}}vt.exports=ds});var kt=y((dl,_t)=>{"use strict";var ys=()=>"",ps=()=>`,"time":${Date.now()}`,gs=()=>`,"time":${Math.round(Date.now()/1e3)}`,bs=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;_t.exports={nullTime:ys,epochTime:ps,unixTime:gs,isoTime:bs}});var Ot=y((ml,xt)=>{"use strict";function ws(e){try{return JSON.stringify(e)}catch(t){return'"[Circular]"'}}xt.exports=Ss;function Ss(e,t,r){var s=r&&r.stringify||ws,n=1;if(typeof e=="object"&&e!==null){var i=t.length+n;if(i===1)return e;var a=new Array(i);a[0]=s(e);for(var o=1;o<i;o++)a[o]=s(t[o]);return a.join(" ")}if(typeof e!="string")return e;var f=t.length;if(f===0)return e;for(var c="",l=1-n,u=-1,h=e&&e.length||0,d=0;d<h;){if(e.charCodeAt(d)===37&&d+1<h){switch(u=u>-1?u:0,e.charCodeAt(d+1)){case 100:case 102:if(l>=f||t[l]==null)break;u<d&&(c+=e.slice(u,d)),c+=Number(t[l]),u=d+2,d++;break;case 105:if(l>=f||t[l]==null)break;u<d&&(c+=e.slice(u,d)),c+=Math.floor(Number(t[l])),u=d+2,d++;break;case 79:case 111:case 106:if(l>=f||t[l]===void 0)break;u<d&&(c+=e.slice(u,d));var m=typeof t[l];if(m==="string"){c+="'"+t[l]+"'",u=d+2,d++;break}if(m==="function"){c+=t[l].name||"<anonymous>",u=d+2,d++;break}c+=s(t[l]),u=d+2,d++;break;case 115:if(l>=f)break;u<d&&(c+=e.slice(u,d)),c+=String(t[l]),u=d+2,d++;break;case 37:u<d&&(c+=e.slice(u,d)),c+="%",u=d+2,d++,l--;break}++l}++d}return u===-1?e:(u<h&&(c+=e.slice(u)),c)}});var Et=y((yl,ce)=>{"use strict";if(typeof SharedArrayBuffer!="undefined"&&typeof Atomics!="undefined"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));ce.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let s=Date.now()+Number(t);for(;s>Date.now(););};ce.exports=e}});var qt=y((pl,Rt)=>{"use strict";var _=require("fs"),vs=require("events"),_s=require("util").inherits,jt=require("path"),Lt=Et(),ue=100,fe=16*1024*1024;function At(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(n,i){if(n){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",n)}):t.emit("error",n);return}t.fd=i,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t._reopening&&!t._writing&&t._len>t.minLength&&!t.destroyed&&T(t)}let s=t.append?"a":"w";if(t.sync)try{t.mkdir&&_.mkdirSync(jt.dirname(e),{recursive:!0});let n=_.openSync(e,s);r(null,n)}catch(n){throw r(n),n}else t.mkdir?_.mkdir(jt.dirname(e),{recursive:!0},n=>{if(n)return r(n);_.open(e,s,r)}):_.open(e,s,r)}function S(e){if(!(this instanceof S))return new S(e);let{fd:t,dest:r,minLength:s,sync:n,append:i=!0,mkdir:a,retryEAGAIN:o}=e||{};if(t=t||r,this._bufs=[],this._len=0,this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._hwm=Math.max(s||0,16387),this.file=null,this.destroyed=!1,this.minLength=s||0,this.sync=n||!1,this.append=i||!1,this.retryEAGAIN=o||(()=>!0),this.mkdir=a||!1,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")At(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=fe)throw new Error(`minLength should be smaller than MAX_WRITE (${fe})`);this.release=(f,c)=>{if(f){if(f.code==="EAGAIN"&&this.retryEAGAIN(f,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{Lt(ue),this.release(void 0,0)}catch(u){this.release(u)}else setTimeout(()=>{_.write(this.fd,this._writingBuf,"utf8",this.release)},ue);else this._writing=!1,this.emit("error",f);return}if(this._len-=c,this._writingBuf=this._writingBuf.slice(c),this._writingBuf.length){if(!this.sync){_.write(this.fd,this._writingBuf,"utf8",this.release);return}try{do{let u=_.writeSync(this.fd,this._writingBuf,"utf8");this._len-=u,this._writingBuf=this._writingBuf.slice(u)}while(this._writingBuf)}catch(u){this.release(u);return}}let l=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):l>this.minLength?T(this):this._ending?l>0?T(this):(this._writing=!1,M(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(ks,this)):this.emit("drain"))},this.on("newListener",function(f){f==="drain"&&(this._asyncDrainScheduled=!1)})}function ks(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}_s(S,vs);S.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return!this._writing&&t>fe?r.push(e):r.length===0?r[0]=""+e:r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&T(this),this._len<this._hwm};S.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||(this._bufs.length===0&&this._bufs.push(""),T(this))};S.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&_.close(t,r=>{if(r)return this.emit("error",r)})}),At(e||this.file,this)};S.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?T(this):M(this)))};S.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");for(!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");this._bufs.length;){let e=this._bufs[0];try{this._len-=_.writeSync(this.fd,e,"utf8"),this._bufs.shift()}catch(t){if(t.code!=="EAGAIN"||!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Lt(ue)}}};S.prototype.destroy=function(){this.destroyed||M(this)};function T(e){let t=e.release;if(e._writing=!0,e._writingBuf=e._writingBuf||e._bufs.shift(),e.sync)try{let r=_.writeSync(e.fd,e._writingBuf,"utf8");t(null,r)}catch(r){t(r)}else _.write(e.fd,e._writingBuf,"utf8",t)}function M(e){if(e.fd===-1){e.once("ready",M.bind(null,e));return}_.close(e.fd,t=>{if(t){e.emit("error",t);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}),e.destroyed=!0,e._bufs=[]}S.SonicBoom=S;S.default=S;Rt.exports=S});var zt=y((he,It)=>{he=It.exports=xs;he.getSerialize=Tt;function xs(e,t,r,s){return JSON.stringify(e,Tt(t,s),r)}function Tt(e,t){var r=[],s=[];return t==null&&(t=function(n,i){return r[0]===i?"[Circular ~]":"[Circular ~."+s.slice(0,r.indexOf(i)).join(".")+"]"}),function(n,i){if(r.length>0){var a=r.indexOf(this);~a?r.splice(a+1):r.push(this),~a?s.splice(a,1/0,n):s.push(n),~r.indexOf(i)&&(i=t.call(this,n,i))}else r.push(i);return e==null?i:e.call(this,n,i)}}});var $t=y((gl,Bt)=>{"use strict";var{format:de}=require("util");function Os(){let e={},t=new Map;function r(n,i,a){if(!n)throw new Error("Fastify warning name must not be empty");if(!i)throw new Error("Fastify warning code must not be empty");if(!a)throw new Error("Fastify warning message must not be empty");if(i=i.toUpperCase(),e[i]!==void 0)throw new Error(`The code '${i}' already exist`);function o(f,c,l){let u;return f&&c&&l?u=de(a,f,c,l):f&&c?u=de(a,f,c):f?u=de(a,f):u=a,{code:i,name:n,message:u}}return t.set(i,!1),e[i]=o,e[i]}function s(n,i,a,o){if(e[n]===void 0)throw new Error(`The code '${n}' does not exist`);if(t.get(n)===!0)return;t.set(n,!0);let f=e[n](i,a,o);process.emitWarning(f.message,f.name,f.code)}return{create:r,emit:s,emitted:t}}Bt.exports=Os});var Pt=y((bl,Ct)=>{"use strict";var Nt=$t()();Ct.exports=Nt;var Es="PinoWarning";Nt.create(Es,"PINODEP008","prettyPrint is deprecated, use the pino-pretty transport instead")});var ye=y((wl,Wt)=>{"use strict";function Dt(e,t,r,s){function n(){let i=t.deref();i!==void 0&&r(i,s)}e[s]=n,process.once(s,n)}var Ft=new FinalizationRegistry(Mt),me=new WeakMap;function Mt(e){process.removeListener("exit",e.exit),process.removeListener("beforeExit",e.beforeExit)}function js(e,t){if(e===void 0)throw new Error("the object can't be undefined");let r=new WeakRef(e),s={};me.set(e,s),Ft.register(e,s),Dt(s,r,t,"exit"),Dt(s,r,t,"beforeExit")}function Ls(e){let t=me.get(e);me.delete(e),t&&Mt(t),Ft.unregister(e)}Wt.exports={register:js,unregister:Ls}});var Kt=y((Sl,Jt)=>{"use strict";var W=1e3;function As(e,t,r,s,n){let i=Date.now()+s,a=Atomics.load(e,t);if(a===r){n(null,"ok");return}let o=a,f=c=>{Date.now()>i?n(null,"timed-out"):setTimeout(()=>{o=a,a=Atomics.load(e,t),a===o?f(c>=W?W:c*2):a===r?n(null,"ok"):n(null,"not-equal")},c)};f(1)}function Rs(e,t,r,s,n){let i=Date.now()+s,a=Atomics.load(e,t);if(a!==r){n(null,"ok");return}let o=f=>{Date.now()>i?n(null,"timed-out"):setTimeout(()=>{a=Atomics.load(e,t),a!==r?n(null,"ok"):o(f>=W?W:f*2)},f)};o(1)}Jt.exports={wait:As,waitDiff:Rs}});var Gt=y((vl,Ht)=>{"use strict";var qs=4,Ts=8;Ht.exports={WRITE_INDEX:qs,READ_INDEX:Ts}});var Qt=y((kl,Yt)=>{"use strict";var{EventEmitter:Is}=require("events"),{Worker:zs}=require("worker_threads"),{join:Bs}=require("path"),{pathToFileURL:$s}=require("url"),{wait:Ns}=Kt(),{WRITE_INDEX:v,READ_INDEX:E}=Gt(),Cs=require("buffer"),Ps=Cs.constants.MAX_STRING_LENGTH,pe=class{constructor(t){this._value=t}deref(){return this._value}},Ds=global.FinalizationRegistry||class{register(){}unregister(){}},Fs=global.WeakRef||pe,Vt=new Ds(e=>{e.exited||e.terminate()});function Ms(e,t){let{filename:r,workerData:s}=t,n=Bs(__dirname,"lib","worker.js"),i=new zs(n,z(L({},t.workerOpts),{workerData:{filename:r.indexOf("file://")===0?r:$s(r).href,dataBuf:e._dataBuf,stateBuf:e._stateBuf,workerData:s}}));return i.stream=new pe(e),i.on("message",Ws),i.on("exit",Js),Vt.register(e,i),i}function Ut(e){e.needDrain=!1,e.emit("drain")}function B(e){let t=Atomics.load(e._state,v),r=e._data.length-t;if(r>0){if(e.buf.length===0){e.flushing=!1,e.needDrain||(e.needDrain=!0,process.nextTick(Ut,e));return}let s=e.buf.slice(0,r),n=Buffer.byteLength(s);n<=r?(e.buf=e.buf.slice(r),e._write(s,B.bind(null,e))):e.flush(()=>{for(Atomics.store(e._state,E,0),Atomics.store(e._state,v,0);n>e.buf.length;)r=r/2,s=e.buf.slice(0,r),n=Buffer.byteLength(s);e.buf=e.buf.slice(r),e._write(s,B.bind(null,e))})}else if(r===0){if(t===0&&e.buf.length===0)return;e.flush(()=>{Atomics.store(e._state,E,0),Atomics.store(e._state,v,0),B(e)})}else throw new Error("overwritten")}function Ws(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new Fs(t),t._sync?(t.ready=!0,t.flushSync(),t.emit("ready")):(t.once("drain",function(){t.flush(()=>{t.ready=!0,t.emit("ready")})}),B(t));break;case"ERROR":t.closed=!0,t.worker.exited=!0,t.worker.removeAllListeners("exit"),t.worker.terminate().then(null,()=>{}),process.nextTick(()=>{t.emit("error",e.err)});break;default:throw new Error("this should not happen: "+e.code)}}function Js(e){let t=this.stream.deref();t!==void 0&&(Vt.unregister(t),t.closed=!0,t.worker.exited=!0,setImmediate(function(){e!==0&&t.emit("error",new Error("The worker thread exited")),t.emit("close")}))}var Xt=class extends Is{constructor(t={}){super();if(t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this._stateBuf=new SharedArrayBuffer(128),this._state=new Int32Array(this._stateBuf),this._dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this._data=Buffer.from(this._dataBuf),this._sync=t.sync||!1,this.worker=Ms(this,t),this.ready=!1,this.ending=!1,this.needDrain=!1,this.closed=!1,this.buf=""}_write(t,r){let s=Atomics.load(this._state,v),n=Buffer.byteLength(t);return this._data.write(t,s),Atomics.store(this._state,v,s+n),Atomics.notify(this._state,v),r(),!0}_hasSpace(){let t=Atomics.load(this._state,v);return this._data.length-this.buf.length-t>0}write(t){if(this.closed)throw new Error("the worker has exited");return this.flushing&&this.buf.length+t.length>=Ps&&(this._writeSync(),this.flushing=!0),!this.ready||this.flushing?(this.buf+=t,this._hasSpace()):this._sync?(this.buf+=t,this._writeSync(),!0):(this.buf=t,this.flushing=!0,setImmediate(B,this),this._hasSpace())}end(){if(this.closed)throw new Error("the worker has exited");if(!this.ready){this.once("ready",this.end.bind(this));return}if(this.flushing){this.once("drain",this.end.bind(this));return}if(this.ending)return;this.ending=!0,this.flushSync();let t=Atomics.load(this._state,E);Atomics.store(this._state,v,-1),Atomics.notify(this._state,v);let r=0;for(;t!==-1;)if(Atomics.wait(this._state,E,t,1e3),t=Atomics.load(this._state,E),++r==10)throw new Error("end() took too long (10s)");process.nextTick(()=>{this.emit("finish")})}flush(t){if(this.closed)throw new Error("the worker has exited");let r=Atomics.load(this._state,v);Ns(this._state,E,r,1/0,(s,n)=>{if(s){this.emit("error",s),t(s);return}if(n==="not-equal"){this.flush(t);return}t()})}_writeSync(){let t=()=>{this.needDrain||(this.needDrain=!0,process.nextTick(Ut,this))};for(this.flushing=!1;this.buf.length!==0;){let r=Atomics.load(this._state,v),s=this._data.length-r;if(s===0){this._flushSync(),Atomics.store(this._state,E,0),Atomics.store(this._state,v,0);continue}else if(s<0)throw new Error("overwritten");let n=this.buf.slice(0,s),i=Buffer.byteLength(n);if(i<=s)this.buf=this.buf.slice(s),this._write(n,t);else{for(this._flushSync(),Atomics.store(this._state,E,0),Atomics.store(this._state,v,0);i>this.buf.length;)s=s/2,n=this.buf.slice(0,s),i=Buffer.byteLength(n);this.buf=this.buf.slice(s),this._write(n,t)}}}flushSync(){if(this.closed)throw new Error("the worker has exited");this._writeSync(),this._flushSync()}_flushSync(){if(this.flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(this._state,v),r=0;for(;;){let s=Atomics.load(this._state,E);if(s!==t)Atomics.wait(this._state,E,s,1e3);else break;if(++r==10)throw new Error("_flushSync took too long (10s)")}}unref(){this.worker.unref()}ref(){this.worker.ref()}get writable(){return!this.closed}};Yt.exports=Xt});var be=y((xl,er)=>{"use strict";var{createRequire:Ks}=require("module"),Hs=re(),{join:ge,isAbsolute:Gs}=require("path"),J;global.WeakRef&&global.WeakMap&&global.FinalizationRegistry&&(J=ye());var Vs=Qt();function Us(e){if(J)J.register(e,Zt),e.on("close",function(){J.unregister(e)});else{let t=Zt.bind(null,e);process.once("beforeExit",t),process.once("exit",t),e.on("close",function(){process.removeListener("beforeExit",t),process.removeListener("exit",t)})}}function Xs(e,t,r){let s=new Vs({filename:e,workerData:t,workerOpts:r});s.on("ready",n),s.on("close",function(){process.removeListener("exit",i)}),process.on("exit",i);function n(){process.removeListener("exit",i),s.unref(),r.autoEnd!==!1&&Us(s)}function i(){s.closed||s.flushSync()}return s}function Zt(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function Ys(e){let{pipeline:t,targets:r,options:s={},worker:n={},caller:i=Hs()}=e,a=Ks(i),o=e.target;if(o&&r)throw new Error("only one of target or targets can be specified");return r?(o=ge(__dirname,"worker.js"),s.targets=r.map(c=>z(L({},c),{target:f(c.target)}))):e.pipeline&&(o=ge(__dirname,"worker-pipeline.js"),s.targets=t.map(c=>z(L({},c),{target:f(c.target)}))),Xs(f(o),s,n);function f(c){if(Gs(c)||c.indexOf("file://")===0)return c;switch(c){case"pino/file":return ge(__dirname,"..","file.js");default:return a.resolve(c)}}}er.exports=Ys});var H=y((Ol,hr)=>{"use strict";var tr=Ot(),{mapHttpRequest:Qs,mapHttpResponse:Zs}=te(),rr=qt(),ei=zt(),ti=Pt(),{lsCacheSym:ri,chindingsSym:we,parsedChindingsSym:Se,writeSym:nr,serializersSym:ve,formatOptsSym:sr,endSym:ni,stringifiersSym:_e,stringifySym:ir,wildcardFirstSym:or,needsMetadataGsym:lr,redactFmtSym:si,streamSym:ii,nestedKeySym:oi,formattersSym:ke,messageKeySym:ar,nestedKeyStrSym:li}=q(),{isMainThread:ai}=require("worker_threads"),ci=be();function $(){}function ui(e,t){if(!t)return r;return function(...n){t.call(this,n,r,e)};function r(s,...n){if(typeof s=="object"){let i=s;s!==null&&(s.method&&s.headers&&s.socket?s=Qs(s):typeof s.setHeader=="function"&&(s=Zs(s)));let a;i===null&&n.length===0?a=[null]:(i=n.shift(),a=n),this[nr](s,tr(i,a,this[sr]),e)}else this[nr](null,tr(s,n,this[sr]),e)}}function cr(e){let t="",r=0,s=!1,n=255,i=e.length;if(i>100)return JSON.stringify(e);for(var a=0;a<i&&n>=32;a++)n=e.charCodeAt(a),(n===34||n===92)&&(t+=e.slice(r,a)+"\\",r=a,s=!0);return s?t+=e.slice(r):t=e,n<32?JSON.stringify(e):'"'+t+'"'}function fi(e,t,r,s){let n=this[ir],i=this[_e],a=this[ni],o=this[we],f=this[ve],c=this[ke],l=this[ar],u=this[ri][r]+s;u=u+o;let h,d=e.hasOwnProperty===void 0;c.log&&(e=c.log(e));let m=i[or],p="";for(let g in e)if(h=e[g],(d||e.hasOwnProperty(g))&&h!==void 0){h=f[g]?f[g](h):h;let w=i[g]||m;switch(typeof h){case"undefined":case"function":continue;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":w&&(h=w(h));break;case"string":h=(w||cr)(h);break;default:h=(w||n)(h)}if(h===void 0)continue;p+=',"'+g+'":'+h}let b="";if(t!==void 0){h=f[l]?f[l](t):t;let g=i[l]||m;switch(typeof h){case"function":break;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":g&&(h=g(h)),b=',"'+l+'":'+h;break;case"string":h=(g||cr)(h),b=',"'+l+'":'+h;break;default:h=(g||n)(h),b=',"'+l+'":'+h}}return this[oi]?u+this[li]+p.slice(1)+"}"+b+a:u+p+b+a}function hi(e,t){let r,s=e[we],n=e[ir],i=e[_e],a=i[or],o=e[ve];t=e[ke].bindings(t);for(let c in t)if(r=t[c],(c!=="level"&&c!=="serializers"&&c!=="formatters"&&c!=="customLevels"&&t.hasOwnProperty(c)&&r!==void 0)===!0){if(r=o[c]?o[c](r):r,r=(i[c]||a||n)(r),r===void 0)continue;s+=',"'+c+'":'+r}return s}function ur(e,t,r,s){if(t&&typeof t=="function")return t=t.bind(s),xe(t(e),r,e);try{let n=require("pino-pretty").prettyFactory;return n.asMetaWrapper=xe,xe(n(e),r,e)}catch(n){throw n.message.startsWith("Cannot find module 'pino-pretty'")?Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately"):n}}function xe(e,t,r){r=Object.assign({suppressFlushSyncWarning:!1},r);let s=!1;return{[lr]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){r.suppressFlushSyncWarning||s||(s=!0,fr(t,this),t.write(e(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){let n=this.lastLogger,i=null;return n?(n.hasOwnProperty(Se)?i=n[Se]:(i=JSON.parse("{"+n[we].substr(1)+"}"),n[Se]=i),i):null},write(n){let i=this.lastLogger,a=this.chindings(),o=this.lastTime;typeof o=="number"||(o.match(/^\d+/)?o=parseInt(o):o=o.slice(1,-1));let f=this.lastObj,c=this.lastMsg,l=null,u=i[ke],h=u.log?u.log(f):f,d=i[ar];c&&h&&!h.hasOwnProperty(d)&&(h[d]=c);let m=Object.assign({level:this.lastLevel,time:o},h,l),p=i[ve],b=Object.keys(p);for(var g=0;g<b.length;g++){let O=b[g];m[O]!==void 0&&(m[O]=p[O](m[O]))}for(let O in a)m.hasOwnProperty(O)||(m[O]=a[O]);let j=i[_e][si],N=e(typeof j=="function"?j(m):m);N!==void 0&&(fr(t,this),t.write(N))}}}function di(e){return e.write!==e.constructor.prototype.write}function K(e){let t=new rr(e);return t.on("error",r),!e.sync&&ai&&mi(t),t;function r(s){if(s.code==="EPIPE"){t.write=$,t.end=$,t.flushSync=$,t.destroy=$;return}t.removeListener("error",r),t.emit("error",s)}}function mi(e){if(global.WeakRef&&global.WeakMap&&global.FinalizationRegistry){let t=ye();t.register(e,yi),e.on("close",function(){t.unregister(e)})}}function yi(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function pi(e){return function(r,s,n={},i){if(typeof n=="string")i=K({dest:n,sync:!0}),n={};else if(typeof i=="string"){if(n&&n.transport)throw Error("only one of option.transport or stream can be specified");i=K({dest:i,sync:!0})}else n instanceof rr||n.writable||n._writableState?(i=n,n={}):n.transport&&(i=ci(L({caller:s},n.transport)));if(n=Object.assign({},e,n),n.serializers=Object.assign({},e.serializers,n.serializers),"onTerminated"in n)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in n&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),n.levelKey=n.changeLevelName,delete n.changeLevelName);let{enabled:a,prettyPrint:o,prettifier:f,messageKey:c}=n;if(a===!1&&(n.level="silent"),i=i||process.stdout,i===process.stdout&&i.fd>=0&&!di(i)&&(i=K({fd:i.fd,sync:!0})),o){ti.emit("PINODEP008");let l=Object.assign({messageKey:c},o);i=ur(l,f,i,r)}return{opts:n,stream:i}}}function gi(e,t){if(typeof e=="undefined"||typeof e.child!="function")throw Error("expected a pino logger instance");let r=typeof t!="undefined";if(r&&typeof t!="function")throw Error("if supplied, the handler parameter should be a function");let s=e[ii];if(typeof s.flushSync!="function")throw Error("final requires a stream that has a flushSync method, such as pino.destination");let n=new Proxy(e,{get:(i,a)=>a in i.levels.values?(...o)=>{i[a](...o),s.flushSync()}:i[a]});if(!r){try{s.flushSync()}catch{}return n}return(i=null,...a)=>{try{s.flushSync()}catch(o){}return t(i,n,...a)}}function bi(e){try{return JSON.stringify(e)}catch(t){try{return ei(e)}catch(r){return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function wi(e,t,r){return{level:e,bindings:t,log:r}}function fr(e,t){e[lr]===!0&&(e.lastLevel=t.lastLevel,e.lastMsg=t.lastMsg,e.lastObj=t.lastObj,e.lastTime=t.lastTime,e.lastLogger=t.lastLogger)}hr.exports={noop:$,buildSafeSonicBoom:K,getPrettyStream:ur,asChindings:hi,asJson:fi,genLog:ui,createArgsNormalizer:pi,final:gi,stringify:bi,buildFormatters:wi}});var G=y((El,mr)=>{"use strict";var{lsCacheSym:Si,levelValSym:Oe,useOnlyCustomLevelsSym:vi,streamSym:_i,formattersSym:ki,hooksSym:xi}=q(),{noop:Oi,genLog:A}=H(),x={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},dr={fatal:e=>{let t=A(x.fatal,e);return function(...r){let s=this[_i];if(t.call(this,...r),typeof s.flushSync=="function")try{s.flushSync()}catch(n){}}},error:e=>A(x.error,e),warn:e=>A(x.warn,e),info:e=>A(x.info,e),debug:e=>A(x.debug,e),trace:e=>A(x.trace,e)},Ee=Object.keys(x).reduce((e,t)=>(e[x[t]]=t,e),{}),Ei=Object.keys(Ee).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function ji(e){let t=e[ki].level,{labels:r}=e.levels,s={};for(let n in r){let i=t(r[n],Number(n));s[n]=JSON.stringify(i).slice(0,-1)}return e[Si]=s,e}function Li(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function Ai(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let s=this[Oe],n=this[Oe]=r[e],i=this[vi],a=this[xi].logMethod;for(let o in r){if(n>r[o]){this[o]=Oi;continue}this[o]=Li(o,i)?dr[o](a):A(r[o],a)}this.emit("level-change",e,n,t[s],s)}function Ri(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function qi(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[Oe]}function Ti(e=null,t=!1){let r=e?Object.keys(e).reduce((i,a)=>(i[e[a]]=a,i),{}):null,s=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Ee,r),n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:x,e);return{labels:s,values:n}}function Ii(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(i=>t[i]),r?[]:Object.keys(Ee).map(i=>+i),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:x,t);if(!(e in s))throw Error(`default level:${e} must be included in custom levels`)}function zi(e,t){let{labels:r,values:s}=e;for(let n in t){if(n in s)throw Error("levels cannot be overridden");if(t[n]in r)throw Error("pre-existing level values cannot be used for new levels")}}mr.exports={initialLsCache:Ei,genLsCache:ji,levelMethods:dr,getLevel:Ri,setLevel:Ai,isLevelEnabled:qi,mappings:Ti,levels:x,assertNoLevelCollisions:zi,assertDefaultLevelFound:Ii}});var yr=y((jl,Bi)=>{Bi.exports={name:"pino",version:"7.0.5",description:"super fast, all natural json logger",main:"pino.js",type:"commonjs",types:"pino.d.ts",browser:"./browser.js",files:["pino.js","file.js","pino.d.ts","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],scripts:{docs:"docsify serve","browser-test":"airtap --local 8080 test/browser*test.js",lint:"eslint .",test:"npm run lint && tap test/*test.js test/*/*test.js && jest test/jest && npm run test-types","test-ci":"npm run lint && tap --no-check-coverage test/*test.js test/*/*test.js --coverage-report=lcovonly && npm run test-types","test-ci-pnpm":"pnpm run lint && tap --no-coverage --no-check-coverage test/*test.js test/*/*test.js && pnpm run test-types","test-ci-yarn-pnp":"yarn run lint && tap --no-check-coverage test/*test.js test/*/*test.js --coverage-report=lcovonly","test-types":"tsc && tsd && ts-node test/types/pino.ts","cov-ui":"tap --coverage-report=html test/*test.js test/*/*test.js",bench:"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-object":"node benchmarks/utils/runbench object","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-formatters":"node benchmarks/utils/runbench formatters","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},bin:{pino:"./bin.js"},precommit:"test",repository:{type:"git",url:"git+https://github.com/pinojs/pino.git"},keywords:["fast","logger","stream","json"],author:"Matteo Collina <hello@matteocollina.com>",contributors:["David Mark Clements <huperekchuno@googlemail.com>","James Sumners <james.sumners@gmail.com>","Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)"],license:"MIT",bugs:{url:"https://github.com/pinojs/pino/issues"},homepage:"http://getpino.io",devDependencies:{"@types/node":"^16.11.0",airtap:"4.0.3",benchmark:"^2.1.4",bole:"^4.0.0",bunyan:"^1.8.14","docsify-cli":"^4.4.1",eslint:"^7.17.0","eslint-config-standard":"^16.0.3","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^5.1.0",execa:"^5.0.0",fastbench:"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1",jest:"^27.3.1",log:"^6.0.0",loglevel:"^1.6.7","pino-pretty":"^v7.1.0","pre-commit":"^1.2.2",proxyquire:"^2.1.3",pump:"^3.0.0",semver:"^7.0.0",split2:"^4.0.0",steed:"^1.1.3","strip-ansi":"^6.0.0",tap:"^15.0.1",tape:"^5.0.0",through2:"^4.0.0","ts-node":"^10.3.0",tsd:"^0.18.0",typescript:"^4.4.4",winston:"^3.3.3"},dependencies:{"fast-redact":"^3.0.0","fastify-warning":"^0.2.0","get-caller-file":"^2.0.5","json-stringify-safe":"^5.0.1","on-exit-leak-free":"^0.2.0","pino-abstract-transport":"v0.4.0","pino-std-serializers":"^4.0.0","quick-format-unescaped":"^4.0.3","sonic-boom":"^2.2.1","thread-stream":"^0.11.1"},tsd:{directory:"test/types"}}});var je=y((Ll,pr)=>{"use strict";var{version:$i}=yr();pr.exports={version:$i}});var Er=y((Rl,Or)=>{"use strict";var{EventEmitter:Ni}=require("events"),{lsCacheSym:Ci,levelValSym:Pi,setLevelSym:Le,getLevelSym:gr,chindingsSym:Ae,parsedChindingsSym:Di,mixinSym:Fi,asJsonSym:br,writeSym:Mi,timeSym:Wi,timeSliceIndexSym:Ji,streamSym:wr,serializersSym:R,formattersSym:Re,useOnlyCustomLevelsSym:Ki,needsMetadataGsym:Hi,redactFmtSym:Gi,stringifySym:Vi,formatOptsSym:Ui,stringifiersSym:Xi}=q(),{getLevel:Yi,setLevel:Qi,isLevelEnabled:Zi,mappings:eo,initialLsCache:to,genLsCache:ro,assertNoLevelCollisions:no}=G(),{asChindings:Sr,asJson:so,buildFormatters:vr,stringify:_r}=H(),{version:io}=je(),oo=ae(),lo=class{},kr={constructor:lo,child:ao,bindings:co,setBindings:uo,flush:mo,isLevelEnabled:Zi,version:io,get level(){return this[gr]()},set level(e){this[Le](e)},get levelVal(){return this[Pi]},set levelVal(e){throw Error("levelVal is read-only")},[Ci]:to,[Mi]:fo,[br]:so,[gr]:Yi,[Le]:Qi};Object.setPrototypeOf(kr,Ni.prototype);Or.exports=function(){return Object.create(kr)};var xr=e=>e;function ao(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[R],s=this[Re],n=Object.create(this);if(t.hasOwnProperty("serializers")===!0){n[R]=Object.create(null);for(let l in r)n[R][l]=r[l];let f=Object.getOwnPropertySymbols(r);for(var i=0;i<f.length;i++){let l=f[i];n[R][l]=r[l]}for(let l in t.serializers)n[R][l]=t.serializers[l];let c=Object.getOwnPropertySymbols(t.serializers);for(var a=0;a<c.length;a++){let l=c[a];n[R][l]=t.serializers[l]}}else n[R]=r;if(t.hasOwnProperty("formatters")){let{level:f,bindings:c,log:l}=t.formatters;n[Re]=vr(f||s.level,c||xr,l||s.log)}else n[Re]=vr(s.level,xr,s.log);if(t.hasOwnProperty("customLevels")===!0&&(no(this.levels,t.customLevels),n.levels=eo(t.customLevels,n[Ki]),ro(n)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){n.redact=t.redact;let f=oo(n.redact,_r),c={stringify:f[Gi]};n[Vi]=_r,n[Xi]=f,n[Ui]=c}n[Ae]=Sr(n,e);let o=t.level||this.level;return n[Le](o),n}function co(){let t=`{${this[Ae].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function uo(e){let t=Sr(this,e);this[Ae]=t,delete this[Di]}function fo(e,t,r){let s=this[Wi](),n=this[Fi],i;e==null?i=n?n({}):{}:e instanceof Error?(i=Object.assign(n?n({}):{},{err:e}),t===void 0&&(t=e.message)):(i=Object.assign(n?n({}):{},e),t===void 0&&e.err&&(t=e.err.message));let a=this[br](i,t,r,s),o=this[wr];o[Hi]===!0&&(o.lastLevel=r,o.lastObj=i,o.lastMsg=t,o.lastTime=s.slice(this[Ji]),o.lastLogger=this),o.write(a)}function ho(){}function mo(){let e=this[wr];"flush"in e&&e.flush(ho)}});var Ar=y((ql,Lr)=>{"use strict";var qe=Symbol.for("pino.metadata"),{levels:yo}=G(),jr=Object.create(yo);jr.silent=1/0;function po(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let s=jr;t.levels&&typeof t.levels=="object"&&(s=t.levels);let n={write:i,add:o,flushSync:a,end:f,minLevel:0,streams:[],clone:c,[qe]:!0};return Array.isArray(e)?e.forEach(o,n):o.call(n,e),e=null,n;function i(l){let u,h=this.lastLevel,{streams:d}=this,m;for(let p=0;p<d.length&&(u=d[p],u.level<=h);p++){if(m=u.stream,m[qe]){let{lastTime:b,lastMsg:g,lastObj:w,lastLogger:j}=this;m.lastLevel=h,m.lastTime=b,m.lastMsg=g,m.lastObj=w,m.lastLogger=j}(!t.dedupe||u.level===h)&&m.write(l)}}function a(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync()}function o(l){let{streams:u}=this;return typeof l.write=="function"?o.call(this,{stream:l}):typeof l.levelVal=="number"?o.call(this,Object.assign({},l,{level:l.levelVal,levelVal:void 0})):typeof l.level=="string"?o.call(this,Object.assign({},l,{level:s[l.level]})):(typeof l.level!="number"?l=Object.assign({},l,{level:30}):l=Object.assign({},l),l.id=r++,u.unshift(l),u.sort(go),this.minLevel=u[0].level,n)}function f(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync(),l.end()}function c(l){let u=new Array(this.streams.length);for(let h=0;h<u.length;h++)u[h]={level:l,stream:this.streams[h].stream};return{write:i,add:o,minLevel:l,streams:u,clone:c,flushSync:a,[qe]:!0}}}function go(e,t){return e.level-t.level}Lr.exports=po});var Fr=y((Tl,k)=>{"use strict";var bo=require("os"),Rr=te(),wo=re(),So=ae(),qr=kt(),vo=Er(),Tr=q(),{assertDefaultLevelFound:_o,mappings:Ir,genLsCache:ko}=G(),{createArgsNormalizer:xo,asChindings:Oo,final:Eo,stringify:V,buildSafeSonicBoom:zr,buildFormatters:jo,noop:Lo}=H(),{version:Ao}=je(),{chindingsSym:Br,redactFmtSym:Ro,serializersSym:$r,timeSym:qo,timeSliceIndexSym:To,streamSym:Io,stringifySym:Nr,stringifiersSym:Cr,setLevelSym:zo,endSym:Bo,formatOptsSym:$o,messageKeySym:No,nestedKeySym:Co,mixinSym:Po,useOnlyCustomLevelsSym:Do,formattersSym:Pr,hooksSym:Fo,nestedKeyStrSym:Mo}=Tr,{epochTime:Dr,nullTime:Wo}=qr,{pid:Jo}=process,Ko=bo.hostname(),Ho=Rr.err,Te={level:"info",messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:Jo,hostname:Ko},serializers:Object.assign(Object.create(null),{err:Ho}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:Dr,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1},Go=xo(Te),Vo=Object.assign(Object.create(null),Rr);function Ie(...e){let t={},{opts:r,stream:s}=Go(t,wo(),...e),{redact:n,crlf:i,serializers:a,timestamp:o,messageKey:f,nestedKey:c,base:l,name:u,level:h,customLevels:d,mixin:m,useOnlyCustomLevels:p,formatters:b,hooks:g}=r,w=jo(b.level,b.bindings,b.log);w.bindings||(w.bindings=Te.formatters.bindings),w.level||(w.level=Te.formatters.level);let j=n?So(n,V):{},N=n?{stringify:j[Ro]}:{stringify:V},O="}"+(i?`\r
`:`
`),ze=Oo.bind(null,{[Br]:"",[$r]:a,[Cr]:j,[Nr]:V,[Pr]:w}),U="";l!==null&&(u===void 0?U=ze(l):U=ze(Object.assign({},l,{name:u})));let Be=o instanceof Function?o:o?Dr:Wo,Kr=Be().indexOf(":")+1;if(p&&!d)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(m&&typeof m!="function")throw Error(`Unknown mixin type "${typeof m}" - expected "function"`);_o(h,d,p);let Hr=Ir(d,p);return Object.assign(t,{levels:Hr,[Do]:p,[Io]:s,[qo]:Be,[To]:Kr,[Nr]:V,[Cr]:j,[Bo]:O,[$o]:N,[No]:f,[Co]:c,[Mo]:c?`,${JSON.stringify(c)}:{`:"",[$r]:a,[Po]:m,[Br]:U,[Pr]:w,[Fo]:g,silent:Lo}),Object.setPrototypeOf(t,vo()),ko(t),t[zo](h),t}k.exports=Ie;k.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=e.dest||process.stdout.fd,zr(e)):zr({dest:e,minLength:0,sync:!0});k.exports.transport=be();k.exports.multistream=Ar();k.exports.final=Eo;k.exports.levels=Ir();k.exports.stdSerializers=Vo;k.exports.stdTimeFunctions=Object.assign({},qr);k.exports.symbols=Tr;k.exports.version=Ao;k.exports.default=Ie;k.exports.pino=Ie});en(exports,{connect:()=>Xo,logger:()=>Jr});var Mr=De(require("aws-sdk")),Wr=De(Fr()),Jr=(0,Wr.pino)({name:"coin-cubes",level:"debug"}),Uo=new Mr.default.DynamoDB.DocumentClient,Xo=async e=>{Jr.info("Started processing websocket request to connect");let{connectedAt:t,connectionId:r,routeKey:s,messageDirection:n}=e.requestContext,i={TableName:String(process.env.tableName),Item:{id:r,connection:{connectionId:r,connectedAt:t,routeKey:s,messageDirection:n}}};return await Uo.put(i).promise(),{statusCode:200,body:"Connected"}};0&&(module.exports={connect,logger});
//# sourceMappingURL=index.js.map
