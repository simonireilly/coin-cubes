{
  "version": 3,
  "sources": ["../../stacks/index.ts", "../../stacks/MyStack.ts"],
  "sourcesContent": ["import MyStack from \"./MyStack\";\nimport * as sst from \"@serverless-stack/resources\";\n\nexport default function main(app: sst.App): void {\n  // Set default runtime for all functions\n  app.setDefaultFunctionProps({\n    runtime: \"nodejs14.x\"\n  });\n\n  new MyStack(app, \"my-stack\");\n\n  // Add more stacks\n}\n", "import { RemovalPolicy } from '@aws-cdk/core';\nimport {\n  App,\n  Stack,\n  StackProps,\n  Table,\n  TableFieldType,\n  WebSocketApi,\n} from '@serverless-stack/resources';\n\nexport default class MyStack extends Stack {\n  constructor(scope: App, id: string, props?: StackProps) {\n    super(scope, id, props);\n\n    // Create the table\n    const table = new Table(this, 'Connections', {\n      fields: {\n        pk: TableFieldType.STRING,\n        sk: TableFieldType.STRING,\n      },\n      primaryIndex: { partitionKey: 'pk', sortKey: 'sk' },\n      dynamodbTable: {\n        removalPolicy: RemovalPolicy.DESTROY,\n      },\n    });\n\n    // Create the websocket API\n    const api = new WebSocketApi(this, 'Api', {\n      defaultFunctionProps: {\n        environment: {\n          tableName: table.dynamodbTable.tableName,\n        },\n      },\n      routes: {\n        $connect: 'src/sockets/index.connect',\n        $disconnect: 'src/sockets/index.disconnect',\n        sendMessage: 'src/sockets/index.sendMessage',\n        // $default: 'src/default.main',\n      },\n    });\n\n    // Allow the API to access the table\n    api.attachPermissions([table.dynamodbTable]);\n\n    // Show the endpoint in the output\n    this.addOutputs({\n      ApiEndpoint: api.url,\n    });\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;;;ACAA,kBAA8B;AAC9B,uBAOO;AAEP,4BAAqC,uBAAM;AAAA,EACzC,YAAY,OAAY,IAAY,OAAoB;AACtD,UAAM,OAAO,IAAI;AAGjB,UAAM,QAAQ,IAAI,uBAAM,MAAM,eAAe;AAAA,MAC3C,QAAQ;AAAA,QACN,IAAI,gCAAe;AAAA,QACnB,IAAI,gCAAe;AAAA;AAAA,MAErB,cAAc,EAAE,cAAc,MAAM,SAAS;AAAA,MAC7C,eAAe;AAAA,QACb,eAAe,0BAAc;AAAA;AAAA;AAKjC,UAAM,MAAM,IAAI,8BAAa,MAAM,OAAO;AAAA,MACxC,sBAAsB;AAAA,QACpB,aAAa;AAAA,UACX,WAAW,MAAM,cAAc;AAAA;AAAA;AAAA,MAGnC,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,aAAa;AAAA,QACb,aAAa;AAAA;AAAA;AAMjB,QAAI,kBAAkB,CAAC,MAAM;AAG7B,SAAK,WAAW;AAAA,MACd,aAAa,IAAI;AAAA;AAAA;AAAA;;;AD3CR,cAAc,KAAoB;AAE/C,MAAI,wBAAwB;AAAA,IAC1B,SAAS;AAAA;AAGX,MAAI,QAAQ,KAAK;AAAA;",
  "names": []
}
